# å¼•å¯¼é¡µæ¨¡å—æ¥å£æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **æ–‡æ¡£åç§°**: å¼•å¯¼é¡µæ¨¡å—æ¥å£æ–‡æ¡£
- **ç‰ˆæœ¬**: 1.0.0
- **æ›´æ–°æ—¶é—´**: 2024-01-31
- **æè¿°**: å¼•å¯¼é¡µæ¨¡å—ç›¸å…³çš„APIæ¥å£æ–‡æ¡£

---

## ç›®å½•
1. [æ ‡ç­¾æœç´¢åŠŸèƒ½](#1-æ ‡ç­¾æœç´¢åŠŸèƒ½)
2. [é€šç”¨å“åº”æ ¼å¼](#2-é€šç”¨å“åº”æ ¼å¼)
3. [é”™è¯¯ç è¯´æ˜](#3-é”™è¯¯ç è¯´æ˜)
4. [æ³¨æ„äº‹é¡¹](#4-æ³¨æ„äº‹é¡¹)

---

## 1. æ ‡ç­¾æœç´¢åŠŸèƒ½

### 1.1 æ ‡ç­¾æœç´¢
- **æ¥å£è·¯å¾„**: `POST /api/v1/search`
- **è¯·æ±‚æ–¹å¼**: POST
- **åŠŸèƒ½æè¿°**: æ ¹æ®æ ‡ç­¾æœç´¢ç›¸å…³å†…å®¹ï¼Œæ”¯æŒå†…å®¹ç±»å‹ç­›é€‰å’Œæ’åº

#### è¯·æ±‚å‚æ•°
```json
{
  "keyword": "ç§‘å¹»",
  "searchType": "TAG",
  "contentType": "ALL",
  "sortBy": "relevance",
  "sortDirection": "DESC",
  "currentPage": 1,
  "pageSize": 20
}
```

#### è¯·æ±‚å‚æ•°è¯´æ˜
| å‚æ•°å | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | æè¿° |
|--------|------|------|--------|------|
| keyword | String | æ˜¯ | - | æœç´¢å…³é”®è¯ï¼ˆæ ‡ç­¾åç§°ï¼‰ |
| searchType | String | å¦ | TAG | æœç´¢ç±»å‹ï¼šTAGï¼ˆæ ‡ç­¾æœç´¢ï¼‰ |
| contentType | String | å¦ | ALL | å†…å®¹ç±»å‹ï¼šVIDEOã€NOVELã€COMICã€ARTICLEã€AUDIOã€ALL |
| sortBy | String | å¦ | relevance | æ’åºæ–¹å¼ï¼šrelevanceï¼ˆç›¸å…³åº¦ï¼‰ã€hotï¼ˆçƒ­åº¦ï¼‰ã€latestï¼ˆæœ€æ–°ï¼‰ |
| sortDirection | String | å¦ | DESC | æ’åºæ–¹å‘ï¼šASCï¼ˆå‡åºï¼‰ã€DESCï¼ˆé™åºï¼‰ |
| currentPage | Integer | å¦ | 1 | å½“å‰é¡µç  |
| pageSize | Integer | å¦ | 20 | é¡µé¢å¤§å° |

#### è¯·æ±‚ç¤ºä¾‹
```http
POST /api/v1/search
Content-Type: application/json

{
  "keyword": "ç§‘å¹»",
  "searchType": "TAG",
  "contentType": "VIDEO",
  "sortBy": "hot",
  "sortDirection": "DESC",
  "currentPage": 1,
  "pageSize": 20
}
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "id": 1,
        "title": "ç§‘å¹»ç”µå½±æ¨è",
        "description": "ç²¾é€‰ç§‘å¹»ç”µå½±åˆé›†",
        "contentType": "VIDEO",
        "authorId": 123,
        "authorNickname": "ç§‘å¹»è¾¾äºº",
        "authorAvatar": "https://example.com/avatar.jpg",
        "categoryId": 1,
        "categoryName": "ç”µå½±",
        "tags": "ç§‘å¹»,ç”µå½±,æ¨è",
        "viewCount": 1000,
        "likeCount": 50,
        "commentCount": 20,
        "favoriteCount": 30,
        "status": "PUBLISHED",
        "createTime": "2024-01-30T10:30:00"
      }
    ],
    "total": 100,
    "currentPage": 1,
    "pageSize": 20,
    "totalPages": 5
  }
}
```

### 1.2 æ ‡ç­¾æ··åˆæœç´¢
- **æ¥å£è·¯å¾„**: `GET /api/v1/search/tag/{tag}/mixed`
- **è¯·æ±‚æ–¹å¼**: GET
- **åŠŸèƒ½æè¿°**: æ ¹æ®æ ‡ç­¾è¿›è¡Œæ··åˆæœç´¢ï¼ŒåŒæ—¶æœç´¢ç”¨æˆ·å’Œå†…å®¹

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| tag | String | æ˜¯ | æ ‡ç­¾åç§°ï¼ˆè·¯å¾„å‚æ•°ï¼‰ |
| currentPage | Integer | å¦ | å½“å‰é¡µç ï¼Œé»˜è®¤1 |
| pageSize | Integer | å¦ | é¡µé¢å¤§å°ï¼Œé»˜è®¤20 |

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/v1/search/tag/ç§‘å¹»/mixed?currentPage=1&pageSize=20
```

#### å“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      {
        "type": "CONTENT",
        "content": {
          "id": 1,
          "title": "ç§‘å¹»ç”µå½±æ¨è",
          "contentType": "VIDEO",
          "authorId": 123,
          "tags": "ç§‘å¹»,ç”µå½±"
        }
      },
      {
        "type": "USER",
        "user": {
          "id": 456,
          "nickname": "ç§‘å¹»çˆ±å¥½è€…",
          "tags": "ç§‘å¹»,ç”µå½±,å°è¯´"
        }
      }
    ],
    "total": 50,
    "currentPage": 1,
    "pageSize": 20,
    "totalPages": 3
  }
}
```

### 1.3 æ ‡ç­¾å†…å®¹æœç´¢
- **æ¥å£è·¯å¾„**: `GET /api/v1/search/tag/{tag}/contents`
- **è¯·æ±‚æ–¹å¼**: GET
- **åŠŸèƒ½æè¿°**: æ ¹æ®æ ‡ç­¾æœç´¢ç›¸å…³å†…å®¹

#### è¯·æ±‚å‚æ•°
| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° |
|--------|------|------|------|
| tag | String | æ˜¯ | æ ‡ç­¾åç§°ï¼ˆè·¯å¾„å‚æ•°ï¼‰ |
| currentPage | Integer | å¦ | å½“å‰é¡µç ï¼Œé»˜è®¤1 |
| pageSize | Integer | å¦ | é¡µé¢å¤§å°ï¼Œé»˜è®¤20 |

#### è¯·æ±‚ç¤ºä¾‹
```http
GET /api/v1/search/tag/ç§‘å¹»/contents?currentPage=1&pageSize=20
```

---

## 2. é€šç”¨å“åº”æ ¼å¼

### æˆåŠŸå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": {
    // å…·ä½“æ•°æ®
  }
}
```

### åˆ†é¡µå“åº”
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "records": [
      // æ•°æ®åˆ—è¡¨
    ],
    "total": 100,
    "currentPage": 1,
    "pageSize": 20,
    "totalPages": 5
  }
}
```

### é”™è¯¯å“åº”
```json
{
  "code": 400,
  "message": "é”™è¯¯ä¿¡æ¯",
  "data": null
}
```

---

## 3. é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªæˆæƒ |
| 403 | ç¦æ­¢è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

---

## 4. æ³¨æ„äº‹é¡¹

1. **è®¤è¯è¦æ±‚**: æ ‡ç­¾æœç´¢æ¥å£æ— éœ€ç”¨æˆ·ç™»å½•ï¼Œå¯å…¬å¼€è®¿é—®
2. **åˆ†é¡µå‚æ•°**: é»˜è®¤é¡µç ä¸º1ï¼Œé¡µé¢å¤§å°ä¸º20ï¼Œæœ€å¤§é¡µé¢å¤§å°ä¸º100
3. **æœç´¢æ€§èƒ½**: æ ‡ç­¾æœç´¢æ”¯æŒå…¨æ–‡ç´¢å¼•ï¼Œæœç´¢é€Ÿåº¦å¿«
4. **å†…å®¹ç±»å‹**: æ”¯æŒçš„å†…å®¹ç±»å‹åŒ…æ‹¬ï¼šVIDEOï¼ˆè§†é¢‘ï¼‰ã€NOVELï¼ˆå°è¯´ï¼‰ã€COMICï¼ˆæ¼«ç”»ï¼‰ã€ARTICLEï¼ˆæ–‡ç« ï¼‰ã€AUDIOï¼ˆéŸ³é¢‘ï¼‰
5. **æ’åºæ–¹å¼**: 
   - relevanceï¼ˆç›¸å…³åº¦ï¼‰ï¼šæ ¹æ®æ ‡ç­¾åŒ¹é…åº¦å’Œå†…å®¹è´¨é‡æ’åº
   - hotï¼ˆçƒ­åº¦ï¼‰ï¼šæ ¹æ®æµè§ˆé‡ã€ç‚¹èµæ•°ã€è¯„è®ºæ•°ç»¼åˆæ’åº
   - latestï¼ˆæœ€æ–°ï¼‰ï¼šæ ¹æ®åˆ›å»ºæ—¶é—´æ’åº

---

## æ¥å£è°ƒç”¨ç¤ºä¾‹

### å®Œæ•´çš„æ ‡ç­¾æœç´¢æµç¨‹

1. **åŸºç¡€æ ‡ç­¾æœç´¢**
```http
POST /api/v1/search
Content-Type: application/json

{
  "keyword": "ç§‘å¹»",
  "searchType": "TAG",
  "contentType": "VIDEO",
  "sortBy": "hot",
  "sortDirection": "DESC",
  "currentPage": 1,
  "pageSize": 20
}
```

2. **æ ‡ç­¾æ··åˆæœç´¢**
```http
GET /api/v1/search/tag/ç§‘å¹»/mixed?currentPage=1&pageSize=20
```

3. **æ ‡ç­¾å†…å®¹æœç´¢**
```http
GET /api/v1/search/tag/ç§‘å¹»/contents?currentPage=1&pageSize=20
```

---

## åŠŸèƒ½å®Œæ•´æ€§è¯´æ˜

### âœ… **å®Œå…¨å®ç°çš„åŠŸèƒ½**
- **æ ‡ç­¾æœç´¢**: é€šè¿‡SearchControllerå®ç°ï¼Œæ”¯æŒå…³é”®è¯æœç´¢ã€å†…å®¹ç±»å‹ç­›é€‰ã€æ’åºç­‰
- **æ ‡ç­¾æ··åˆæœç´¢**: é€šè¿‡SearchControllerå®ç°ï¼ŒåŒæ—¶æœç´¢ç”¨æˆ·å’Œå†…å®¹
- **æ ‡ç­¾å†…å®¹æœç´¢**: é€šè¿‡SearchControllerå®ç°ï¼Œä¸“é—¨æœç´¢å†…å®¹

### ğŸ”— **APIè·¯å¾„å¯¹åº”å…³ç³»**
- **æ ‡ç­¾æœç´¢**: `POST /api/v1/search` - SearchController.search()
- **æ ‡ç­¾æ··åˆæœç´¢**: `GET /api/v1/search/tag/{tag}/mixed` - SearchController.searchByTagMixed()
- **æ ‡ç­¾å†…å®¹æœç´¢**: `GET /api/v1/search/tag/{tag}/contents` - SearchController.searchContentsByTag()

### ğŸ“Š **åŠŸèƒ½å®ç°ç‡: 100%**
æ‰€æœ‰å¼•å¯¼é¡µæ¨¡å—æè¿°çš„åŠŸèƒ½éƒ½èƒ½é€šè¿‡ç°æœ‰APIå®Œå…¨å®ç°ã€‚
